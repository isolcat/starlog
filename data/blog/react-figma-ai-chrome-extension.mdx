---
title: 'ä»è®¾è®¡å¸ˆçš„ç—›ç‚¹åˆ°å¼€å‘è€…çš„è§£å†³æ–¹æ¡ˆï¼šæ‰‹æŠŠæ‰‹æ‰“é€ React Figma AI Chromeæ‰©å±•'
date: '2025-06-23'
summary: 'ä» Figma æ–‡æ¡ˆæå–çš„ç—›ç‚¹å‡ºå‘ï¼Œæ‹†è§£ä¸€ä¸ª React + Chrome æ‰©å±•çš„å®Œæ•´æ–¹æ¡ˆï¼šAI æ¥å…¥ã€ç»“æ„åŒ– JSONã€Figma API ä¸å·¥ç¨‹åŒ–è½åœ°ã€‚'
tags: ['Figma', 'Chrome Extension', 'React', 'AI', 'i18n']
---

# å‰è¨€

> â€œæ¯æ¬¡çœ‹åˆ°è®¾è®¡å¸ˆåœ¨ Figma é‡Œå¤åˆ¶ç²˜è´´æ–‡æ¡ˆï¼Œæˆ‘å°±æƒ³å†™ä¸ªå·¥å…·å¸®ä»–ä»¬...â€

### ç°å®ä¸­çš„å¼€å‘å›°å¢ƒ

æƒ³è±¡ä¸€ä¸‹è¿™ä¸ªåœºæ™¯ï¼šä½ æ˜¯ä¸€ä¸ªå‰ç«¯å¼€å‘å·¥ç¨‹å¸ˆï¼Œè®¾è®¡å¸ˆç»™ä½ å‘æ¥ä¸€ä¸ª Figma è®¾è®¡ç¨¿ï¼Œé‡Œé¢æœ‰å‡ åä¸ªé¡µé¢ï¼Œæ¯ä¸ªé¡µé¢éƒ½æœ‰å¤§é‡çš„æ–‡æ¡ˆå†…å®¹ã€‚è€Œä½ çš„ä¸šåŠ¡æ˜¯é¢å¯¹å›½é™…åŒ–çš„ï¼Œéœ€è¦ç”Ÿæˆä¸€ä¸ªåŸå§‹çš„ JSON æ–‡æ¡ˆå»æ‰¾ç¿»è¯‘çš„åŒå­¦æ¥å¸®ä½ ç¿»è¯‘æˆå„ä¸ªå›½å®¶çš„è¯­è¨€ ğŸ¤¯ å¹¶ä¸”è¿™ä¸ª JSON è¦æ ¹æ®ä½ å…·ä½“çš„é¡¹ç›®æ¥è°ƒæ•´æ ¼å¼ã€‚

å¾ˆå¿«ï¼Œä½ éœ€è¦åšçš„ä»»åŠ¡å¦‚ä¸‹ï¼š

1. **æ‰‹åŠ¨å¤åˆ¶æ–‡æ¡ˆ** - åœ¨ Figma ä¸­ä¸€ä¸ªä¸ªç‚¹å‡»æ–‡æœ¬ï¼Œå¤åˆ¶ç²˜è´´åˆ°ä»£ç é‡Œ
2. **æ•´ç†æˆ JSON æ ¼å¼** - æ‰‹åŠ¨æ•´ç†æˆå‰ç«¯å¯ç”¨çš„å¤šè¯­è¨€æ–‡ä»¶æ ¼å¼
3. **ç¿»è¯‘æˆå¤šç§è¯­è¨€** - è¿˜è¦æ‰¾ç¿»è¯‘å·¥å…·é€ä¸ªç¿»è¯‘
4. **ä¿æŒæ•°æ®ç»“æ„ä¸€è‡´** - ç¡®ä¿æ‰€æœ‰è¯­è¨€ç‰ˆæœ¬çš„é”®å€¼å¯¹åº”æ­£ç¡®

è¿™ä¸ªè¿‡ç¨‹ä¸ä»…æ•ˆç‡ä½ä¸‹ï¼Œè¿˜å®¹æ˜“å‡ºé”™ã€‚æ›´è¦å‘½çš„æ˜¯ï¼Œ**å½“è®¾è®¡å¸ˆä¿®æ”¹äº†æ–‡æ¡ˆï¼Œä½ åˆè¦é‡å¤ä¸€éè¿™ä¸ªç—›è‹¦çš„è¿‡ç¨‹...è¿™æ— ç–‘æ˜¯å¾ˆä¸é«˜æ•ˆçš„è¡Œä¸º**

é‚£ä¹ˆè¿™æ—¶å€™ï¼Œä½œä¸ºä¸€ä¸ªæœ‰â€œæ‡’ç™Œâ€çš„ç¨‹åºå‘˜ï¼Œæˆ‘å¼€å§‹æ€è€ƒå¦‚ä½•æé«˜å¼€å‘æ•ˆç‡ï¼š

- èƒ½å¦è‡ªåŠ¨ä» Figma æå–æ–‡æ¡ˆï¼Ÿ
- èƒ½å¦ç›´æ¥è°ƒç”¨ AI è¿›è¡Œæ™ºèƒ½åˆ†æå’Œç¿»è¯‘ï¼Ÿ
- èƒ½å¦ä¸€é”®ç”Ÿæˆå‰ç«¯éœ€è¦çš„å¤šè¯­è¨€ JSON æ–‡ä»¶ï¼Ÿ

äºæ˜¯ï¼Œè¿™ä¸ª React Figma AI Chrome æ‰©å±•é¡¹ç›®å°±è¯ç”Ÿäº†ã€‚

## ğŸ’¡ ä»ç—›ç‚¹åˆ°è§£å†³æ–¹æ¡ˆ

ä½œä¸ºä¸€ä¸ªç»å¸¸è¢«å¥‡å¥‡æ€ªæ€ªçš„éœ€æ±‚â€œæŠ˜ç£¨â€çš„å¼€å‘è€…ï¼Œæˆ‘æ·±çŸ¥ä¸€ä¸ªé“ç†ï¼š**å¥½çš„å·¥å…·éƒ½æ˜¯ä»è§£å†³çœŸå®ç—›ç‚¹å¼€å§‹çš„**ã€‚ç°åœ¨è®©æˆ‘ä»¬æŠŠåˆšæ‰æåˆ°çš„ç—›ç‚¹é‡æ–°æ¢³ç†ä¸€ä¸‹ï¼Œä½†è¿™æ¬¡æˆ‘ä»¬è¦ä»â€œç¨‹åºå‘˜æ€ç»´â€çš„è§’åº¦æ¥åˆ†æï¼š

**éœ€æ±‚ 1ï¼šè‡ªåŠ¨åŒ–æ–‡æ¡ˆæå–**

- ç—›ç‚¹ï¼šæ‰‹åŠ¨å¤åˆ¶ç²˜è´´ï¼Œæ•ˆç‡ä½ä¸‹ï¼Œç‰¹åˆ«æ˜¯æˆ‘å¼€å‘çš„æ—¶å€™ï¼Œæœ‰æ—¶å€™é¢å¯¹ä¸€äº›æ¸¸æˆè§„åˆ™é¡µï¼ˆæ¯”å¦‚ä¸€æ•´é¡µçš„æ–‡å­—è¯´æ˜æ­é…å‡ ä¸ªè¡¨æ ¼çš„é‚£ç§ï¼‰ï¼Œå…‰æ˜¯å¤åˆ¶ + æ•´ç†æˆå®Œæ•´çš„ JSON å°±å·²ç»è¶³å¤Ÿç—›è‹¦äº†ï¼ŒåŸºæœ¬ä¸Šä¸€ä¸ªå†…å®¹å¤šçš„è¯´æ˜é¡µï¼Œå»åˆ›å»ºä¸€ä¸ªç¬¦åˆè§„èŒƒçš„ JSON å°±éœ€è¦ååˆ†é’Ÿå·¦å³äº† ğŸ˜­
- è§£å†³æ€è·¯ï¼šé€šè¿‡ Chrome æ‰©å±•ç›´æ¥è®¿é—® **Figma APIï¼Œè‡ªåŠ¨æå–é¡µé¢æ–‡æ¡ˆ**ï¼Œè¿™æ ·å°±èŠ‚çœæ‰æˆ‘ä»¬å¤åˆ¶ç²˜è´´çš„æ—¶é—´äº†

**éœ€æ±‚ 2ï¼šæ™ºèƒ½æ–‡æ¡ˆå¤„ç†**

- ç—›ç‚¹ï¼šæ–‡æ¡ˆéœ€è¦ç»“æ„åŒ–æ•´ç†ï¼Œè¿˜è¦ç¿»è¯‘ã€‚åƒå¾€å¸¸æˆ‘å¼€å‘çš„æ—¶å€™ï¼Œé™¤äº†è‡ªå·±æ‰‹åŠ¨å»æ•´ç†ä»¥å¤–ï¼Œæœ€å¸¸ç”¨çš„æ–¹å¼å°±æ˜¯è®© AI å»å¸®æˆ‘æ•´ç†æˆä¸€ä¸ªå¯ä»¥å¼€å‘çš„ JSONï¼Œä½†å¾€å¾€éœ€è¦æ‰‹åŠ¨å»è¾“å…¥ä¸€å¤§å † **Prompt**ï¼Œæ‰å¯ä»¥ç”Ÿæˆä¸€ä¸ªå‹‰å¼ºå¤Ÿç”¨çš„ã€‚æˆ–è€…ä½ ä¼šè¯´ï¼šâ€œå“¥ä»¬ï¼ä½ å¼„åˆ°å¤‡å¿˜å½•é‡Œï¼Œéœ€è¦çš„æ—¶å€™å†å¼„ä¸å°±æˆäº†å—ï¼Ÿâ€é‚£æˆ‘é—®ä½ ï¼Œè¿™æ ·ä¼˜é›…å—ï¼Ÿæ¯æ¬¡éƒ½éœ€è¦ä»å¤‡å¿˜å½•é‡Œæ‰¾åˆ° **Prompt**ï¼Œç„¶åè°ƒæ•´é¡¹ç›®çš„æè¿° or é¡¹ç›®éœ€è¦çš„ JSON æ ¼å¼ï¼Œè¿™ä¹Ÿå¤ªç¹çäº†å§â€¦
- è§£å†³æ€è·¯ï¼šæ¥å…¥ AI æœåŠ¡ï¼Œè®© AI å¸®æˆ‘ä»¬å¹²â€œè„æ´»ç´¯æ´»â€ï¼Œæœ€å¥½å¯ä»¥ç•™å‡º **è°ƒæ•´é¡¹ç›®æè¿°å’Œ JSON æ ¼å¼çš„åŒºåŸŸ**

**éœ€æ±‚ 3ï¼šä¸€é”®ç”Ÿæˆå¤šè¯­è¨€ JSON**

- ç—›ç‚¹ï¼šæ‰‹åŠ¨æ•´ç† JSON æ ¼å¼ï¼Œå®¹æ˜“å‡ºé”™
- è§£å†³æ€è·¯ï¼šè®© AI ç›´æ¥è¾“å‡ºæ ‡å‡†åŒ–çš„ JSON æ ¼å¼ï¼Œå¹¶ä¸”æ”¯æŒå¤šè¯­è¨€ç¿»è¯‘

é‚£ä¹ˆç°åœ¨æˆ‘ä»¬çš„å¼€å‘æ€è·¯å°±å·²ç»å®šå¥½äº†ï¼š

![Figma æ–‡æ¡ˆæå–åˆ° AI å¤„ç†æµç¨‹](/static/images/blog/figma-ai-extension/01-flow.png)

# å¼€å‘æµç¨‹

## åˆå§‹åŒ–é¡¹ç›®

```bash
mkdir figma-analyzer-extension
cd figma-analyzer-extension
npm init -y
```

å¼€å‘æŠ€æœ¯æ ˆé€‰æ‹©æ–¹é¢ï¼Œå› ä¸ºæˆ‘å…ˆå‰ä¸€ç›´æ˜¯å†™ Vue çš„ï¼Œå¯¹ React å§‹ç»ˆä¿æŒç€å¥½å¥‡ï¼Œä½†å› ä¸ºå·¥ä½œåŸå› ï¼Œä¸€ç›´æ²¡æœ‰æœºä¼šå»ç”¨åˆ°è¿™ä¸ªä¼ å¥‡çš„å‰ç«¯åº“ï¼Œæ‰€ä»¥è¿™æ¬¡è‡ªå·±çš„å°é¡¹ç›®å°±é€‰æ‹©äº† React æ¥è¿›è¡Œå¼€å‘äº†ã€‚è‡³äºæ‰“åŒ…å·¥å…·æ–¹é¢ï¼Œå°±é€‰æ‹©æˆ‘ä»¬ç†Ÿæ‚‰çš„ Vite æ¥è¿›è¡Œæ‰“åŒ…æ„å»ºå°±å¥½ï½

é™¤äº†è¿™äº›ä¸»è¦çš„æŠ€æœ¯æ ˆï¼Œæˆ‘ä»¬è¿˜è¦æ ¹æ®æˆ‘ä»¬çš„é¡¹ç›®éœ€æ±‚æ¥é€‰æ‹©ä¸€äº›æœ‰è¶£åˆæœ‰ç”¨çš„åº“ï¼Œbelikeï¼š

```markdown
- `@crxjs/vite-plugin`ï¼šä¸“ä¸º Chrome æ‰©å±•ä¼˜åŒ–çš„ Vite æ’ä»¶ï¼ˆ**å¼€å‘ Chrome extension çš„ç¥å™¨ï¼**ï¼‰
- `@types/chrome`ï¼šChrome æ‰©å±• API çš„ TypeScript ç±»å‹å®šä¹‰
- `react-json-pretty`ï¼šç”¨æ¥ç¾åŒ–æ˜¾ç¤º JSON ç»“æœï¼Œæ–¹ä¾¿æˆ‘ä»¬ç›´æ¥åœ¨æ’ä»¶é‡Œæµè§ˆ AI ç”Ÿæˆçš„ JSONï¼Œè¿™ä¸ª JSON-pretty è¶³å¤Ÿ **è½»é‡ç¾è§‚**
```

ä¸­é—´çš„ä¸€äº›ç»†èŠ‚å°±çœç•¥æ‰äº†ï¼Œå¦‚æœæ„Ÿå…´è¶£çš„è¯å¯ä»¥æŸ¥çœ‹ [Chrome æ‰©å±•å®˜æ–¹æ–‡æ¡£](https://developer.chrome.com/docs/extensions/) ï¼ŒåŸºæœ¬ä¸Šå’Œæˆ‘ä»¬çš„ä¹Ÿå¤§å·®ä¸å¤šã€‚

åœ¨ç¨ä½œè°ƒæ•´åï¼Œæˆ‘ä»¬çš„è¿™ä¸ªé¡¹ç›®ç»“æ„å¦‚ä¸‹ï¼š

```markdown
figma-analyzer-extension/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ components/          # React ç»„ä»¶
â”‚   â”‚   â””â”€â”€ FigmaAnalyzer.tsx
â”‚   â”œâ”€â”€ manifest.json        # Chrome æ‰©å±•é…ç½®æ–‡ä»¶ï¼ˆé‡è¦ï¼ï¼‰
â”‚   â”œâ”€â”€ popup.html          # æ‰©å±•å¼¹çª—çš„ HTML
â”‚   â”œâ”€â”€ popup.tsx           # React åº”ç”¨å…¥å£
â”‚   â”œâ”€â”€ popup.css           # æ ·å¼æ–‡ä»¶
â”‚   â”œâ”€â”€ background.ts       # Service Workerï¼ˆåå°è„šæœ¬ï¼‰
â”‚   â”œâ”€â”€ types.ts            # TypeScript ç±»å‹å®šä¹‰
â”‚   â”œâ”€â”€ constants.ts        # å¸¸é‡å®šä¹‰
â”‚   â”œâ”€â”€ prompts.ts          # AI æç¤ºè¯æ¨¡æ¿
â”‚   â”œâ”€â”€ figmaApi.ts         # Figma API æœåŠ¡
â”‚   â””â”€â”€ vite-env.d.ts       # Vite ç¯å¢ƒç±»å‹å®šä¹‰
â”œâ”€â”€ package.json
â”œâ”€â”€ tsconfig.json
â”œâ”€â”€ tsconfig.node.json
â”œâ”€â”€ vite.config.ts
â””â”€â”€ README.md
```

> è¿™é‡Œä¹‹æ‰€ä»¥æŠŠ prompt å•ç‹¬æ”¾åœ¨ä¸€ä¸ª ts æ–‡ä»¶ï¼Œæ˜¯å› ä¸ºæˆ‘ä»¬éœ€è¦æ ¹æ®ä¸åŒçš„åŠŸèƒ½æ¥æ‹†åˆ†ä¸åŒçš„ promptï¼Œå¹¶ä¸”éœ€è¦æ ¹æ®ç”¨æˆ·çš„å…·ä½“ä½¿ç”¨åœºæ™¯æ¥è°ƒæ•´ promptã€‚å¦‚æœæ”¾åœ¨ React ç»„ä»¶ä¸­ï¼Œä¼šè®©æ•´ä¸ªé¡¹ç›®çœ‹ä¸Šå»éå¸¸çš„è‡ƒè‚¿ï¼Œæ‰€ä»¥è¿™é‡Œå•ç‹¬è¿›è¡Œæ‹†åˆ†äº†ã€‚

## æ¥å…¥å¤§æ¨¡å‹ä¹‹æˆ‘å…¨éƒ½è¦

Waitï¼Ÿï¼æˆ‘ä»¬æ˜¯ä¸æ˜¯å¿˜è®°äº†ä¸€ä¸ªå¾ˆé‡è¦çš„äº‹æƒ…ï¼Ÿé€‰æ‹©ä»€ä¹ˆå¤§æ¨¡å‹å‘¢ï¼Ÿå¦‚æœå¤ªè´µäº†ä¼šä¸ä¼šå¾—ä¸å¿å¤±å‘¢ï¼Ÿå¸‚é¢ä¸Šçš„å¤§æ¨¡å‹ä¹Ÿå¤ªå¤šäº†å§â€¦é€‰æ‹©å›°éš¾ç—‡äº† ğŸ¤¡

```jsx
// ç¨‹åºå‘˜çš„å†…å¿ƒç‹¬ç™½
const aiServices = {
  openai: { price: 'ğŸ’°ğŸ’°ğŸ’°', quality: 'ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ', speed: 'ğŸš€ğŸš€ğŸš€' },
  claude: { price: 'ğŸ’°ğŸ’°', quality: 'ğŸŒŸğŸŒŸğŸŒŸğŸŒŸğŸŒŸ', speed: 'ğŸš€ğŸš€' },
  deepseek: { price: 'ğŸ’°', quality: 'ğŸŒŸğŸŒŸğŸŒŸğŸŒŸ', speed: 'ğŸš€ğŸš€ğŸš€' },
  ollama: { price: 'ğŸ†“', quality: 'ğŸŒŸğŸŒŸğŸŒŸ', speed: 'ğŸŒ' },
};

// æœ€åå†³å®šï¼šå°å­©æ‰åšé€‰æ‹©ï¼Œæˆå¹´äººè¡¨ç¤ºï¼Œæˆ‘å…¨éƒ½è¦ï¼
const solution = 'è®©ç”¨æˆ·è‡ªå·±é€‰æ‹©ï¼Œæˆ‘ä»¬éƒ½æ”¯æŒ';
```

![æˆ‘å…¨éƒ½è¦](/static/images/blog/figma-ai-extension/02-all-models.png)

é‚£æˆ‘ä»¬æ¥ç®€å•å®ç°ä¸€ä¸‹ **AI è°ƒç”¨æ¨¡å—**ï¼š

```jsx
// æ”¯æŒå¤šç§ AI æœåŠ¡çš„ç»Ÿä¸€æ¥å£
const callAI = async (prompt, provider) => {
  switch (provider) {
    case 'openai':
      return await callOpenAI(prompt);
    case 'deepseek':
      return await callDeepSeek(prompt);
    // ... å…¶ä»–æœåŠ¡
  }
};
```

æ¥ç€è®©æˆ‘ä»¬å®ç°ä¸€ä¸‹æ¥å…¥ AI å¤§æ¨¡å‹ï¼Œè¿™é‡Œé€‰æ‹©æ€§ä»·æ¯”æœ€é«˜çš„ deepseek æ¥ä½œä¸ºç¤ºä¾‹ï¼ˆå…¶ä»–çš„å¤§æ¨¡å‹åŒç†ï¼‰ï¼š

```jsx
function buildPrompt(request: AIAnalysisRequest): string {
  const { operation, figmaData, projectDescription, targetLanguage } = request;

  if (operation === 'translate') {
    // çº¯ç¿»è¯‘æ¨¡å¼
    const textsToTranslate = figmaData.texts.map((t) => t.text).join('\n');
    const targetLang = getLanguageName(targetLanguage || 'en');
    const additionalInstruction = `\n\n**æœ€ç»ˆæé†’**ï¼šä»¥ä¸Šå…± ${figmaData.texts.length} è¡Œæ–‡æ¡ˆï¼Œæ¯è¡Œè¾“å‡ºæ ¼å¼å¿…é¡»æ˜¯ï¼šè‹±æ–‡åŸæ–‡ï¼š${targetLang}è¯‘æ–‡`;

    return (
      TRANSLATION_PROMPT_TEMPLATE.replace(/\{targetLanguage\}/g, targetLang).replace(
        '{textsToTranslate}',
        textsToTranslate
      ) + additionalInstruction
    );
  } else if (operation === 'translate-and-structure') {
    // ç¿»è¯‘ + ç»“æ„åŒ–æ¨¡å¼
    const allTextsFormatted = figmaData.texts
      .map((text, index) => `${index + 1}. "${text.text}"`)
      .join('\n');

    const projectDesc = projectDescription || 'ç½‘é¡µç•Œé¢è®¾è®¡é¡¹ç›®';
    const targetLang = getLanguageName(targetLanguage || 'en');
    const strictReminder = `\n\n**å†æ¬¡å¼ºè°ƒ**ï¼šè¯·ç¡®ä¿ JSON ä¸­åªåŒ…å«ä¸Šè¿° ${figmaData.totalTextCount} æ¡æå–æ–‡æ¡ˆçš„ç¿»è¯‘ç‰ˆæœ¬ï¼Œä¸è¦æ·»åŠ ä»»ä½•é¢å¤–å†…å®¹ï¼`;

    return (
      TRANSLATE_AND_STRUCTURE_PROMPT_TEMPLATE.replace(/\{targetLanguage\}/g, targetLang)
        .replace('{textCount}', figmaData.totalTextCount.toString())
        .replace('{allTexts}', allTextsFormatted)
        .replace('{projectDescription}', projectDesc) + strictReminder
    );
  } else {
    // ç»“æ„åŒ– JSON ç”Ÿæˆæ¨¡å¼
    const allTextsFormatted = figmaData.texts.map((text) => text.text).join('\n');
    const projectDesc = projectDescription || 'ç½‘é¡µç•Œé¢è®¾è®¡é¡¹ç›®';
    const strictReminder = `\n\n**å†æ¬¡å¼ºè°ƒ**ï¼šè¯·ç¡®ä¿ JSON ä¸­åªåŒ…å«ä¸Šè¿° ${figmaData.totalTextCount} æ¡æå–çš„æ–‡æ¡ˆï¼Œä¸è¦æ·»åŠ ä»»ä½•é¢å¤–å†…å®¹ï¼`;

    return (
      ANALYSIS_PROMPT_TEMPLATE.replace('{textCount}', figmaData.totalTextCount.toString())
        .replace('{allTexts}', allTextsFormatted)
        .replace('{projectDescription}', projectDesc) + strictReminder
    );
  }
}

// DeepSeek API è°ƒç”¨å®ç°
async function callDeepSeekAPI(prompt: string, apiKey: string): Promise<string> {
  const requestBody = {
    model: 'deepseek-chat',
    messages: [{ role: 'user', content: prompt }],
    temperature: 0.2, // é™ä½æ¸©åº¦æé«˜ä¸€è‡´æ€§
    max_tokens: 2000,
  };

  console.log('ğŸš€ å‘é€åˆ° DeepSeek çš„è¯·æ±‚:', requestBody);

  const response = await fetch('https://api.deepseek.com/v1/chat/completions', {
    method: 'POST',
    headers: {
      Authorization: `Bearer ${apiKey}`,
      'Content-Type': 'application/json',
    },
    body: JSON.stringify(requestBody),
  });

  if (!response.ok) {
    const errorText = await response.text();
    console.error('DeepSeek API Error:', errorText);
    throw new Error(`DeepSeek API é”™è¯¯: ${response.status}`);
  }

  const data = await response.json();
  const content = data.choices[0]?.message?.content;

  if (!content) {
    throw new Error('DeepSeek API è¿”å›ç©ºå†…å®¹');
  }

  return content;
}
```

## æ¥å…¥ Ollama æ—¶ï¼Œé‡è§é˜»ç¢

å½“æˆ‘å…´é«˜é‡‡çƒˆåœ°æ¥å…¥ä¸€ä¸ªåˆä¸€ä¸ªä¸»æµå¤§æ¨¡å‹çš„æ—¶å€™ï¼Œä¹ŸåŒæ—¶è€ƒè™‘åˆ°äº†è¿™ä¸ªå…è´¹çš„å·¥å…·ï¼Œä¸ä»…å¯ä»¥æœ¬åœ°è°ƒç”¨å¤§æ¨¡å‹ï¼Œè¿˜å¯ä»¥ä¿è¯ä¿¡æ¯çš„éšç§ï¼Œæ¥å¤„ç†ä¸€äº›æ•æ„Ÿéœ€æ±‚çš„è¯ï¼ŒOllama å†åˆé€‚ä¸è¿‡äº†ã€‚ä½†åœ¨æ¥å…¥çš„æ—¶å€™ï¼Œé‡è§äº†ç¬¬ä¸€ä¸ªå¤§å‘ï¼š**Error 403**ã€‚

åœ¨æŸ¥é˜…ç¤¾åŒº issues çš„æ—¶å€™ï¼Œæˆ‘å‘ç°äº†ä¸å°‘å¼€å‘è€…ä¹Ÿé‡è§äº†åŒæ ·çš„é—®é¢˜ï¼š[Ollama issue #4115](https://github.com/ollama/ollama/issues/4115)ã€‚åœ¨æŸ¥é˜…çš„è¿‡ç¨‹ä¸­ï¼Œæ‰æ‰¾åˆ°äº†è§£å†³æ–¹æ¡ˆï¼š

```bash
macOS ä¸Šï¼š
launchctl setenv OLLAMA_ORIGINS "*"
```

æ‰åˆšè§£å†³å®Œè¿™ä¸ªæŠ¥é”™ï¼Œåˆå‘ç°æˆ‘ä¸‹è½½çš„ **deepseek-r1 8b æ¨¡å‹**ï¼Œä¸€ç›´ä¼šè¿”å› think éƒ¨åˆ†ï¼šå¹¶ä¸”è¿™æ—¶å€™ï¼Œæˆ‘ä»¬çš„è§£ææ¥å£è¿”å›ä¹Ÿå¤±æ•ˆäº†ï¼š

![JSON è§£ææŠ¥é”™](/static/images/blog/figma-ai-extension/03-json-error.png)

åŒæ ·åœ¨ç¤¾åŒºæ‰¾åˆ°äº†ç›¸åŒçš„ç–‘é—®ï¼š[DeepSeek-R1 issue #582](https://github.com/deepseek-ai/DeepSeek-R1/issues/582)ã€‚DeepSeek å®˜æ–¹ä¹Ÿå¹¶æ²¡æœ‰åœ¨ API æ–‡æ¡£ä¸­è¯´ç›¸å…³çš„å†…å®¹â€¦æœç´¢äº†åŠå¤©ä¹Ÿæ²¡æœ‰æ‰¾åˆ°ç»“æœï¼Œäºæ˜¯æˆ‘å°è¯•å»äº†è§£ AI çš„ç›¸å…³æ¦‚å¿µï¼Œæ¯”å¦‚ï¼š

- streamï¼ˆæµå¼è¾“å‡ºï¼‰
- temperatureï¼ˆæ§åˆ¶ç”Ÿæˆæ–‡æœ¬**éšæœºæ€§**çš„é‡è¦å‚æ•°ï¼‰
- thinkï¼ˆæ·±åº¦æ€è€ƒï¼‰

å“¦ï¼æ‰¾åˆ°äº†ï¼Œåœ¨ [Ollama Thinking åšæ–‡](https://ollama.com/blog/thinking) æ‰¾åˆ°äº†ç­”æ¡ˆï¼š

**æ‰‹åŠ¨å°† think è®¾ç½®æˆ false å³å¯**ï¼é¡ºå¸¦ä¸€æï¼Œæˆ‘ä¸ªäººä¸æ˜¯å¾ˆå–œæ¬¢æµå¼è¾“å‡ºï¼Œå³ä½¿ç°åœ¨å¾ˆå¤šçš„å¯¹è¯å¼ AIï¼ˆå¦‚ ChatGPT æˆ–è€… DeepSeekï¼‰éƒ½é€‰æ‹©äº†æµå¼è¾“å‡ºï¼Œä½†æˆ‘ä»¬è¿˜æ˜¯è¦æ ¹æ®è‡ªå·±çš„å¼€å‘é¡¹ç›®æ¥è®¾ç½®ã€‚åœ¨æˆ‘ä»¬è¿™ä¸ªéœ€æ±‚ä¸­ï¼Œç›´æ¥è·å–åˆ°æœ€ç»ˆçš„ç»“æœå°±è¡Œï¼Œä¸éœ€è¦å…³æ³¨ç”Ÿæˆçš„è¿‡ç¨‹ã€‚

## **Figma æ•°æ®è·å– - ä»æ³¨å…¥è„šæœ¬åˆ° REST API çš„é‡æ„ä¹‹è·¯**

æœ€å¼€å§‹æˆ‘æ€è€ƒçš„è·å– Figma æ–‡æœ¬çš„æ–¹å¼æ˜¯æ³¨å…¥è„šæœ¬ï¼Œé€šè¿‡åœ¨ Figma é¡µé¢ä¸­æ³¨å…¥ JavaScript ä»£ç æ¥è·å–é€‰ä¸­å…ƒç´ çš„æ•°æ®ï¼š

```jsx
// æ—©æœŸçš„æ³¨å…¥è„šæœ¬æ–¹æ¡ˆï¼ˆå·²å¼ƒç”¨ï¼‰
function getSelectedElements() {
  // ç›´æ¥è®¿é—® Figma çš„å†…éƒ¨ API
  const selection = figma.currentPage.selection;
  return selection.map((node) => ({
    id: node.id,
    name: node.name,
    text: node.characters,
  }));
}
```

æœ€å¼€å§‹çš„æ—¶å€™æˆ‘è¿˜æ²¾æ²¾è‡ªå–œï¼Œè®¤ä¸ºè‡ªå·±çš„è¿™ä¸ªå®ç°æ€è·¯å¾ˆå®Œç¾ã€‚åé¢åœ¨è·å–å…ƒç´ çš„æ—¶å€™ï¼Œå‘ç°ç»å¸¸å‡ºç°â€œæ— æ³•è·å–é€‰ä¸­å…ƒç´ â€çš„é”™è¯¯ï¼Œè¿™å¯¹ç”¨æˆ·çš„ä½“éªŒæ— ç–‘æ˜¯å¾ˆå·®çš„ã€‚è¿™æ—¶å€™ï¼Œæˆ‘æƒ³åˆ°äº†ç›´æ¥ä½¿ç”¨ Figma APIï¼š

```jsx
export class FigmaApiService {
  private apiToken: string;
  private baseUrl = 'https://api.figma.com/v1';

  constructor(apiToken: string) {
    this.apiToken = apiToken;
  }

  // è·å– Figma æ–‡ä»¶æ•°æ®
  async getFile(fileId: string): Promise<FigmaFileResponse> {
    const response = await fetch(`${this.baseUrl}/files/${fileId}`, {
      headers: {
        'X-Figma-Token': this.apiToken,
      },
    });

    if (!response.ok) {
      const errorText = await response.text();
      throw new Error(`Figma API é”™è¯¯ (${response.status}): ${errorText}`);
    }

    return (await response.json()) as FigmaFileResponse;
  }
}

// ä» Figma URL ä¸­æå–æ–‡ä»¶ ID
static extractFileIdFromUrl(url: string): string | null {
  const patterns = [
    // åŒ¹é… /file/ æˆ– /design/ è·¯å¾„
    /(?:www\.)?figma\.com\/(?:file|design)\/([a-zA-Z0-9-_]+)/,
    // å¤‡ç”¨æ¨¡å¼ï¼šæ›´å®½æ¾çš„åŒ¹é…
    /figma\.com\/[^/]+\/([a-zA-Z0-9-_]+)/,
  ];

  for (const pattern of patterns) {
    const match = url.match(pattern);
    if (match && match[1]) {
      return match[1];
    }
  }
  return null;
}

// ä» URL ä¸­æå–èŠ‚ç‚¹ IDï¼ˆå½“ç”¨æˆ·é€‰ä¸­å…ƒç´ æ—¶ï¼‰
static extractNodeIdFromUrl(url: string): string | null {
  const nodeIdMatch = url.match(/[?&]node-id=([^&]+)/);
  if (nodeIdMatch) {
    let nodeId = decodeURIComponent(nodeIdMatch[1]);
    nodeId = nodeId.replace('%3A', ':').replace('-', ':');
    return nodeId;
  }
  return null;
}

// é€’å½’æå–èŠ‚ç‚¹ä¸­çš„æ‰€æœ‰æ–‡æ¡ˆ
private extractTextsFromNode(node: FigmaNode, texts: FigmaTextInfo[] = []): FigmaTextInfo[] {
  try {
    // å¦‚æœæ˜¯æ–‡æœ¬èŠ‚ç‚¹ä¸”æœ‰æ–‡æ¡ˆå†…å®¹
    if (node.type === 'TEXT' && node.characters) {
      const boundingBox = node.absoluteBoundingBox || { x: 0, y: 0, width: 0, height: 0 };

      texts.push({
        id: node.id,
        name: node.name,
        text: node.characters,
        fontSize: node.style?.fontSize || 16,
        fontFamily: node.style?.fontFamily || 'Unknown',
        x: boundingBox.x,
        y: boundingBox.y,
        width: boundingBox.width,
        height: boundingBox.height,
      });
    }

    // é€’å½’å¤„ç†å­èŠ‚ç‚¹
    if (node.children && node.children.length > 0) {
      for (const child of node.children) {
        this.extractTextsFromNode(child, texts);
      }
    }
  } catch (error) {
    console.warn('æå–èŠ‚ç‚¹æ–‡æ¡ˆæ—¶å‡ºé”™:', error, node);
  }

  return texts;
}
```

æ³¨æ„ï¼Œæˆ‘ä»¬è¦ä½¿ç”¨ Figma API çš„è¯ï¼Œéœ€è¦ä½¿ç”¨ Figma API tokenã€‚è¿™é‡Œç»™ä¸€ä¸ªé“¾æ¥ï¼Œæ–¹ä¾¿ç”¨æˆ·ç‚¹å‡»åç›´æ¥è·³è½¬å»è·å– Figma API Tokenï¼š[Figma API Access Tokens](https://www.figma.com/developers/api#access-tokens)

![AI æœåŠ¡é…ç½®ç•Œé¢](/static/images/blog/figma-ai-extension/04-settings.png)

## **AI Prompt å·¥ç¨‹ - è®© AI ç†è§£ä½ çš„éœ€æ±‚**

**ç¬¬ä¸€ç‰ˆ Prompt çš„å¤±è´¥ç»å†**

æœ€åˆçš„ Prompt è®¾è®¡å¾—è¿‡äºç®€å•ï¼š

```
è¯·åˆ†æä»¥ä¸‹æ–‡æ¡ˆå¹¶ç”Ÿæˆ JSON æ ¼å¼çš„ç»“æœï¼š
{æ–‡æ¡ˆå†…å®¹}
```

ç»“æœ AI ç»å¸¸è¿”å›æ ¼å¼ä¸è§„èŒƒçš„å†…å®¹ï¼Œæœ‰æ—¶å€™è¿˜ä¼šæ·»åŠ é¢å¤–çš„è¯´æ˜æ–‡å­—ï¼Œå³ä½¿æˆ‘å°† temperature è®¾ç½®å¾—è¶³å¤Ÿä½ï¼Œä¹Ÿæœ‰å¾ˆå¤šå¥‡æ€ªçš„ç”Ÿæˆï¼Œå¯¼è‡´ JSON è§£æå¤±è´¥ã€‚

è¿™é‡Œè¡¥å……è¯´æ˜ä¸€ä¸‹ï¼š

åœ¨ AIï¼ˆå°¤å…¶æ˜¯è¯­è¨€æ¨¡å‹ï¼‰ä¸­ï¼Œâ€œtemperatureâ€ï¼ˆæ¸©åº¦ï¼‰æ˜¯ä¸€ä¸ªæ§åˆ¶ç”Ÿæˆæ–‡æœ¬**éšæœºæ€§**çš„é‡è¦å‚æ•°ã€‚

---

## ğŸ² ä»€ä¹ˆæ˜¯ Temperatureï¼Ÿ

> æ¯æ¬¡æ¨¡å‹ç”Ÿæˆä¸‹ä¸€ä¸ª tokenï¼ˆè¯æˆ–å­è¯ï¼‰æ—¶ï¼Œä¼šåŸºäºä¸€ç»„ **logits**ï¼ˆåŸå§‹åˆ†æ•°ï¼‰é€šè¿‡ Softmax å‡½æ•°å°†å…¶è½¬ä¸ºæ¦‚ç‡åˆ†å¸ƒã€‚Temperature ä¼šå½±å“ Softmax çš„å¹³æ»‘ç¨‹åº¦ï¼š
> **ä½æ¸©åº¦ï¼ˆT < 1ï¼‰**ï¼šæ¦‚ç‡åˆ†å¸ƒæ›´é™¡å³­ï¼Œæ¨¡å‹æ›´å€¾å‘äºé€‰æ‹©æœ€é«˜æ¦‚ç‡çš„è¯ï¼Œä¹Ÿå°±æ˜¯æœ€â€œä¿å®ˆâ€â€œç¡®å®šâ€çš„è¾“å‡ºã€‚
> **é«˜æ¸©åº¦ï¼ˆT > 1ï¼‰**ï¼šæ¦‚ç‡åˆ†å¸ƒæ›´å¹³å¦ï¼Œå¢åŠ äº†é€‰æ‹©æ¦‚ç‡è¾ƒä½è¯çš„æœºä¼šï¼Œç”Ÿæˆæ›´â€œå¤šæ ·â€â€œæœ‰åˆ›é€ æ€§â€çš„æ–‡æœ¬ã€‚

$$
softmax(z_i/T)
$$

---

## ä¸¾ä¸ªå¯¹æ¯”ä¾‹å­

åœ¨æŸä¸€å¥è¯ç”Ÿæˆä¸­ï¼Œå¦‚æœ logits æ˜¯ [2, 1, âˆ’1]ï¼ŒSoftmax è½¬æ¢åä¼šæ˜¯å¤§çº¦ [0.67, 0.25, 0.08]ã€‚ä½†å¦‚æœå¼•å…¥ä¸åŒ Temperatureï¼š

- **T â†’ 0**ï¼šå‡ ä¹æ€»æ˜¯é€‰ç¬¬ä¸€ä¸ª tokenï¼Œè¾“å‡ºé«˜åº¦é‡å¤ã€ç¡®å®šã€‚åœ¨æ—¥å¸¸ä¸­ï¼Œå¯¹äºæŠ€æœ¯å†™ä½œã€ç¿»è¯‘æˆ–è€…è¯´é—®ç­”ä¹‹ç±»çš„å°±å¯ä»¥é€‰æ‹©è¿™ç§ Temperature
- **T = 1**ï¼šä¿ç•™åŸå§‹åˆ†å¸ƒ
- **T > 1**ï¼šåˆ†å¸ƒå˜å¹³ï¼Œæ¬¡ä¼˜çš„è¯ä¹Ÿæœ‰æœºä¼šè¢«é‡‡æ ·ï¼Œæ¯”å¦‚â€œæ—é—¨å·¦é“â€å‡ºç°çš„å¯èƒ½æ€§æ›´é«˜ã€‚å¦‚æœä½ æœ‰å¤©é©¬è¡Œç©ºçš„æƒ³æ³•ï¼Œå¹¶ä¸”ä¸æ˜¯å¾ˆåœ¨æ„ä¼šä¸ä¼šå‡ºé”™çš„è¯ï¼Œå°±å¯ä»¥é€‰æ‹©è¿™ç§

---

è¿™é‡Œå…³äº **Temperature çš„ç§‘æ™®æˆ‘ä»¬å°±è®²åˆ°è¿™é‡Œå§**ï¼Œå¦‚æœå¯¹è¿™ä¸ªæ„Ÿå…´è¶£çš„è¯ï¼Œå¯ä»¥çœ‹ Medium ä¸Šçš„è¿™ç¯‡æ–‡ç« ï¼Œè®²å¾—éå¸¸è¯¦ç»†ï¼š[Temperature & LLMs](https://medium.com/%40amansinghalml_33304/temperature-llms-b41d75870510)

å›åˆ°æˆ‘ä»¬çš„é¡¹ç›®å§ï¼Œç»è¿‡å¤§é‡æµ‹è¯•å’Œä¼˜åŒ–ï¼Œæœ€ç»ˆçš„ Prompt æ¨¡æ¿æ˜¯è¿™æ ·çš„ï¼š

```tsx
export const ANALYSIS_PROMPT_TEMPLATE = `
ä½ æ˜¯ä¸€ä¸ªä¸“ä¸šçš„ UI/UX æ–‡æ¡ˆåˆ†æå¸ˆï¼Œè¯·åˆ†æä»¥ä¸‹ {textCount} æ¡ä»è®¾è®¡ç¨¿ä¸­æå–çš„æ–‡æ¡ˆå†…å®¹ã€‚

é¡¹ç›®æè¿°ï¼š{projectDescription}

éœ€è¦åˆ†æçš„æ–‡æ¡ˆï¼š
{allTexts}

è¯·ä¸¥æ ¼æŒ‰ç…§ä»¥ä¸‹è¦æ±‚è¾“å‡º JSON æ ¼å¼çš„åˆ†æç»“æœï¼š

1. å¿…é¡»æ˜¯æœ‰æ•ˆçš„ JSON æ ¼å¼ï¼Œä¸è¦åŒ…å«ä»»ä½•å…¶ä»–æ–‡å­—è¯´æ˜
2. åªåˆ†æä¸Šè¿°æå–çš„ {textCount} æ¡æ–‡æ¡ˆï¼Œä¸è¦æ·»åŠ é¢å¤–å†…å®¹
3. ç»“æ„åŒ–è¾“å‡ºï¼ŒåŒ…å«é¡µé¢æ ‡é¢˜ã€æè¿°ã€å»ºè®®ç­‰å­—æ®µ

è¾“å‡ºæ ¼å¼ç¤ºä¾‹ï¼š
{
  "__page_title": "é¡µé¢æ ‡é¢˜",
  "button_text": "æŒ‰é’®æ–‡æ¡ˆ",
  "description": "æè¿°æ–‡æ¡ˆ",
  "title": "ä¸»æ ‡é¢˜"
}

**å†æ¬¡å¼ºè°ƒ**ï¼šè¯·ç¡®ä¿ JSON ä¸­åªåŒ…å«ä¸Šè¿° {textCount} æ¡æå–çš„æ–‡æ¡ˆï¼Œä¸è¦æ·»åŠ ä»»ä½•é¢å¤–å†…å®¹ï¼
`;
```

æ³¨æ„ï¼è¿™é‡Œåªæ˜¯é’ˆå¯¹äºæˆ‘çš„é¡¹ç›®æ¥å†™çš„å†…å®¹ï¼Œå¦‚æœæ˜¯ä½ æ¥åšçš„è¯ï¼Œå¯ä»¥ç¨å¾®è°ƒæ•´ JSON æ ¼å¼ï¼Œä¹Ÿç®—æ˜¯ä¸€åŠ³æ°¸é€¸çš„äº‹æƒ…äº†ã€‚

# æ•ˆæœå±•ç¤º

è®©æˆ‘ä»¬çœ‹çœ‹æœ€ç»ˆçš„é¡µé¢å±•ç¤ºæ•ˆæœï¼Œç”¨ Figma å®˜æ–¹çš„æ’ä»¶å…¥é—¨å¼€å‘æ¥ä½œä¸ºæ¼”ç¤ºï¼š

![æ’ä»¶è®¾ç½®é¡µ](/static/images/blog/figma-ai-extension/05-extract.png)

![æ–‡æ¡ˆæå–ç•Œé¢](/static/images/blog/figma-ai-extension/06-result.png)

![å¤„ç†ç»“æœå±•ç¤º](/static/images/blog/figma-ai-extension/07-architecture.png)

```mermaid
graph TD
    A["ç”¨æˆ·åœ¨Figmaä¸­é€‰æ‹©å…ƒç´ "] --> B["Chromeæ‰©å±•Popupç•Œé¢"]
    B --> C{"é…ç½®AIæœåŠ¡"}
    C --> D["DeepSeek API"]
    C --> E["OpenAI API"]
    C --> F["Claude API"]
    C --> G["Ollamaæœ¬åœ°æ¨¡å‹"]

    B --> H["æå–Figmaæ•°æ®"]
    H --> I["Figma REST API"]
    I --> J{"æ™ºèƒ½æ£€æµ‹æ¨¡å¼"}
    J --> K["ä»URLæå–èŠ‚ç‚¹ID"]
    J --> L["è·å–æ•´ä¸ªæ–‡ä»¶"]
    K --> M["è·å–ç‰¹å®šå…ƒç´ æ–‡æ¡ˆ"]
    L --> N["è·å–å…¨éƒ¨æ–‡æ¡ˆ"]

    M --> O["Background Scriptå¤„ç†"]
    N --> O
    O --> P["AIåˆ†æå¤„ç†"]
    P --> Q["æ–‡æ¡ˆç¿»è¯‘"]
    P --> R["ç»“æ„åŒ–JSONç”Ÿæˆ"]
    P --> S["æ–‡æ¡ˆåˆ†æ"]

    Q --> T["è¿”å›ç»“æœåˆ°Popup"]
    R --> T
    S --> T
    T --> U["ç”¨æˆ·æŸ¥çœ‹ç»“æœ"]
```

# å¼€å‘æ€è·¯

```mermaid
graph TD
    A["å¼€å‘æŒ‘æˆ˜"] --> B["Chromeæ‰©å±•æ¶æ„è®¾è®¡"]
    B --> C["Manifest V3é…ç½®"]
    B --> D["Reactå‰ç«¯UIè®¾è®¡"]
    B --> E["Background Service Worker"]

    F["æ•°æ®è·å–æ–¹æ¡ˆ"] --> G["æ³¨å…¥è„šæœ¬æ–¹æ¡ˆ(å¼ƒç”¨)"]
    F --> H["Figma REST APIæ–¹æ¡ˆ"]
    H --> I["API TokenéªŒè¯"]
    H --> J["æ–‡ä»¶IDæå–"]
    H --> K["èŠ‚ç‚¹IDæ™ºèƒ½æ£€æµ‹"]

    L["AIæœåŠ¡é›†æˆ"] --> M["DeepSeek API"]
    L --> N["OpenAI API"]
    L --> O["Claude API"]
    L --> P["Ollamaæœ¬åœ°æœåŠ¡"]

    Q["æ ¸å¿ƒåŠŸèƒ½å®ç°"] --> R["æ–‡æ¡ˆæ™ºèƒ½æå–"]
    Q --> S["å¤šè¯­è¨€ç¿»è¯‘"]
    Q --> T["ç»“æ„åŒ–JSONç”Ÿæˆ"]
    Q --> U["ç»“æœå±•ç¤ºä¼˜åŒ–"]

    V["ç”¨æˆ·ä½“éªŒä¼˜åŒ–"] --> W["æ™ºèƒ½æ£€æµ‹é€‰ä¸­å…ƒç´ "]
    V --> X["ç®€åŒ–æ“ä½œæµç¨‹"]
    V --> Y["é”™è¯¯å¤„ç†æœºåˆ¶"]
    V --> Z["æ€§èƒ½ä¼˜åŒ–"]
```

```mermaid
graph TB
    subgraph "ç”¨æˆ·ç¯å¢ƒ"
        A["Figmaè®¾è®¡ç¨¿"] --> B["ç”¨æˆ·é€‰æ‹©å…ƒç´ "]
        B --> C["Chromeæµè§ˆå™¨"]
    end

    subgraph "Chromeæ‰©å±•"
        D["Popupç•Œé¢<br/>(React + TypeScript)"]
        E["Background Service Worker<br/>(æ¶ˆæ¯å¤„ç† + APIè°ƒç”¨)"]
        F["Chrome Storage API<br/>(é…ç½®å­˜å‚¨)"]

        D <--> E
        D <--> F
    end

    subgraph "å¤–éƒ¨æœåŠ¡"
        G["Figma REST API<br/>(æ–‡ä»¶æ•°æ®è·å–)"]
        H["DeepSeek API<br/>(AIåˆ†æ)"]
        I["OpenAI API<br/>(GPTæ¨¡å‹)"]
        J["Claude API<br/>(Anthropic)"]
        K["OllamaæœåŠ¡<br/>(æœ¬åœ°AIæ¨¡å‹)"]
    end

    subgraph "æ•°æ®æµ"
        L["URLè§£æ<br/>(æ–‡ä»¶ID + èŠ‚ç‚¹ID)"]
        M["æ–‡æ¡ˆæå–<br/>(é€’å½’éå†èŠ‚ç‚¹)"]
        N["AIå¤„ç†<br/>(åˆ†æ/ç¿»è¯‘/ç»“æ„åŒ–)"]
        O["ç»“æœå±•ç¤º<br/>(JSONç¾åŒ– + å¤åˆ¶)"]
    end

    C --> D
    E --> G
    E --> H
    E --> I
    E --> J
    E --> K

    G --> L
    L --> M
    M --> N
    N --> O
    O --> D

    style A fill:#e1f5fe
    style D fill:#f3e5f5
    style E fill:#fff3e0
    style G fill:#e8f5e8
    style H fill:#fff8e1
    style I fill:#f1f8e9
    style J fill:#e3f2fd
    style K fill:#fce4ec
```
