---
title: 'MeMoMark'
date: '2024-9-11'
summary: 'è®°å½•ä¸€æ¬¾æ”¯æŒ Markdown çš„ Electron ä¾¿ç¬ºåº”ç”¨çš„å®ç°è¿‡ç¨‹ä¸è¸©å‘ã€‚'
tags: ['Electron', 'Markdown', 'æ¡Œé¢åº”ç”¨']
layout: PostLayout
draft: false
---

# MeMoMark

è®°å½•ä¸€ä¸‹å¼€å‘electronåº”ç”¨é‡è§çš„ä¸€äº›é—®é¢˜å’Œå®ç°æƒ³æ³•

# æƒ³æ³•ï¼š

å®ç°ä¸€ä¸ªæ”¯æŒmarkdownçš„electronåº”ç”¨ï¼Œç±»ä¼¼MacBookè‡ªå¸¦çš„ä¾¿ç¬º

# é‡è§çš„é—®é¢˜

å¾ˆå¤šé—®é¢˜æ˜¯å› ä¸ºGFWğŸ˜ 

- electronå¤§é™†å®‰è£…ä¸è¡Œï¼Œæœ€å¥½æ¢æˆé˜¿é‡Œé•œåƒæºæˆ–è€…ç”¨cnpm
- ä½¿ç”¨**commitizenæŠ¥é”™ï¼š**

[git commitè§„èŒƒåŠè‡ªåŠ¨æ£€æŸ¥å·¥å…·å®‰è£…å°è®° - æ˜é‡‘](https://juejin.cn/post/6844904033635794958)

> è§£å†³æ–¹æ³•ï¼š
> 
> 
> ```jsx
> cnpm install cz-conventional-changelog --save-dev --save-exact
> ```
> 
> å†æ‰‹åŠ¨é…ç½®ä¸€ä¸‹ï¼š
> 
> ```jsx
> "config": {
> "commitizen": {
> "path": "./node_modules/cz-conventional-changelog"
> 	}
> }
> ```
> 

## å‰è¨€

æœ€è¿‘æ¢äº†å°MacBook Airï¼Œå‘ç°å†…ç½®äº†ä¸€ä¸ªâ€œä¾¿ç¬ºâ€çš„appï¼Œæ„Ÿè§‰è›®ä¸é”™çš„ï¼Œå¹³æ—¶å¯ä»¥ç”¨æ¥åšä¸ªæ¯æ—¥è®¡åˆ’å•¥çš„ï¼Œä½†æœ€è®©æˆ‘ä¸æ»¡æ„çš„ä¸€ä¸ªç‚¹å°±æ˜¯**ä¸æ”¯æŒmarkdown**ï¼å¯¼è‡´æ¯æ¬¡ä¸‹æ„è¯†çš„å»ä½¿ç”¨markdownè¯­æ³•çš„æ—¶å€™å°±å¾ˆåˆ«æ‰­ï¼Œç±»ä¼¼è¿™æ ·ï¼š

![Untitled](/static/images/blog/memomark/untitled.png)

çœ‹ç€å°±å¾ˆåˆ«æ‰­ï¼ŒåŠ ä¸Šæ ·å¼ä¹Ÿä¸ç®—å¾ˆç¾è§‚ï¼Œè¯¶ğŸ¤“ğŸ‘†ï¼Œä¸å¦‚è‡ªå·±DIYä¸€ä¸ªï¼Ÿè¯´å¹²å°±å¹²ï¼Œ[**Electron**](https://www.electronjs.org/zh/)ï¼Œå¯åŠ¨ï¼

## æ¶å­æ­å¥½

è¿™éƒ¨åˆ†ä¸æ„¿æ„è¿‡å¤šçš„å»è¯´ï¼Œå’±ä¸»è¦è¿˜æ˜¯ä»¥å®ç°è¿™ä¸ªæ”¯æŒmarkdownçš„ä¾¿ç¬ºå’Œä¼˜åŒ–åŠŸèƒ½ä¸ºä¸»ï¼Œè¿™é‡Œç›´æ¥çœ‹å®˜æ–¹æ–‡æ¡£å³å¯ï¼š[https://www.electronjs.org/zh/docs/latest/tutorial/quick-start](https://www.electronjs.org/zh/docs/latest/tutorial/quick-start)

## åŠŸèƒ½å®ç°

> éœ€æ±‚åˆ†æï¼šæ”¯æŒmarkdownçš„ä¾¿ç¬º
> 

æ ¹æ®æˆ‘ä»¬è‡ªå·±ç»™è‡ªå·±åˆ›å»ºçš„éœ€æ±‚ï¼Œæ¥åšä¸ªç®€å•çš„æµç¨‹å›¾ï¼š

```mermaid
graph TD;
    A[ä¾¿ç¬ºå¤–è§‚æ­å»º] --> B[å¼•å…¥markdownè§£æåº“];
    B --> C[ä¼˜åŒ–å±•ç¤ºæ•ˆæœ];

```

è¿™é‡Œä¸ºäº†æ§åˆ¶å¤§å°ï¼Œå°±ä¸è¦å†å¼•å…¥æ¡†æ¶äº†ï¼Œç›´æ¥ä½¿ç”¨electronæ¥å®ç°ç›¸å…³åŠŸèƒ½å°±è¡Œï¼š

```html
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Markdown Notepad</title>
  <style>
    body {
      display: flex;
      height: 100vh;
      margin: 0;
      font-family: Arial, sans-serif;
    }

    #markdown-input,
    #markdown-preview {
      flex: 1;
      padding: 20px;
      box-sizing: border-box;
      height: 100%;
      overflow-y: auto;
    }

    #markdown-input {
      border-right: 1px solid #ddd;
    }

    #markdown-preview {
      padding-left: 40px;
    }
  </style>
</head>

<body>
  <textarea id="markdown-input" placeholder="Enter Markdown here..."></textarea>
  <div id="markdown-preview"></div>
</body>

</html>
```

è¿™æ—¶å€™æˆ‘ä»¬æ³¨æ„åˆ°ï¼Œä¸Šæ–¹ä¸€ç›´ä¼šæœ‰ä¸€ä¸ªçª—å£æ åœ¨é‚£ï¼Œç›¸æ¯”è¾ƒMacä¸Šçš„ä¾¿ç¬ºæ¥è¯´ï¼Œæ˜¾å¾—å°±å¾ˆä¸ä¼˜é›…ï¼Œè¿™æ—¶å€™å°±å¯ä»¥é€šè¿‡è°ƒæ•´main.jsï¼ˆ*è´Ÿè´£åˆ›å»ºçª—å£å’Œå¤„ç†ç³»ç»Ÿäº‹ä»¶*ï¼‰æ¥ä¿®æ”¹æˆ‘ä»¬åˆ›å»ºçš„çª—å£ï¼š

```jsx
const { app, BrowserWindow, ipcMain } = require('electron');
const path = require('path');

let win; // ä¿®æ”¹å˜é‡åä»¥ç¬¦åˆä¸‹æ–‡ä½¿ç”¨

function createWindow() {
  // åˆ›å»ºä¸€ä¸ªæ— è¾¹æ¡†çš„æµè§ˆå™¨çª—å£
  win = new BrowserWindow({
    width: 320,
    height: 320,
    frame: false, // è®¾ç½®çª—å£æ— è¾¹æ¡†
    webPreferences: {
      nodeIntegration: true,
      contextIsolation: false,
    }
  });
```

é€šè¿‡è®¾ç½®[BrowserWindow](https://www.electronjs.org/zh/docs/latest/api/browser-window#new-browserwindowoptions)ä¸­çš„frameå±æ€§ï¼Œä¾¿å¯ä»¥è®©çª—å£è¾¹æ¡†æ¶ˆå¤±äº†

![Untitled](/static/images/blog/memomark/untitled-1.png)

æ¥ä¸‹æ¥ï¼Œè®©æˆ‘ä»¬è¿›å…¥ä¸‹ä¸€æ­¥ï¼Œå³å¼•å…¥è§£æMarkdownè¯­æ³•çš„åº“ã€‚åœ¨è¿™é‡Œï¼Œæˆ‘ä»¬é€‰æ‹©äº†Markedã€‚Markedæ˜¯ä¸€ä¸ªåŠŸèƒ½å¼ºå¤§çš„JavaScriptåº“ï¼Œå®ƒå¯ä»¥å°†Markdownæ–‡æœ¬è§£æä¸ºHTMLã€‚å®ƒçš„ä¼˜ç‚¹åŒ…æ‹¬é€Ÿåº¦å¿«ï¼Œè½»é‡çº§ï¼ŒåŒæ—¶å®ƒæ”¯æŒGithubé£æ ¼çš„Markdownè¯­æ³•ï¼Œä¹Ÿæ”¯æŒè‡ªå®šä¹‰æ¸²æŸ“ã€‚è¿™äº›ä¼˜ç‚¹ä½¿å¾—Markedæˆä¸ºæˆ‘ä»¬çš„é¦–é€‰ã€‚

```bash
npm install marked
```

è®©æˆ‘ä»¬åœ¨renderer.jsä¸­å¤„ç†ä¸€ä¸‹å‰ç«¯é€»è¾‘ï¼š

```jsx
mdInput.addEventListener('input', function () {
  const renderedHtml = marked.parse(mdInput.value);
  mdPreview.innerHTML = renderedHtml;
});
```

OKï¼Œå†ç¨å¾®ä¿®æ”¹ä¸€ä¸‹HTMLï¼Œè®©æˆ‘ä»¬æ¥çœ‹çœ‹ï¼ŒåŠŸèƒ½æ˜¯ä¸æ˜¯å®ç°äº†ï¼š

![Untitled](/static/images/blog/memomark/untitled-2.png)

å¥½äº†ï¼ŒåŠŸèƒ½æ²¡é—®é¢˜ï¼æˆåŠŸæ¸²æŸ“ï¼

## è¿›ä¸€æ­¥ä¼˜åŒ–

ç°åœ¨ç”¨ç€æ˜¯ä¸æ˜¯æ„Ÿè§‰è¿˜æ˜¯ä¸å¤ªå¯¹åŠ²ï¼Ÿè¿™æ ·å­å·¦ä¾§ä¸€å—ï¼Œå³ä¾§ä¸€å—çš„ï¼Œä¸€ç‚¹éƒ½ä¸ä¼˜é›…ï¼Œé‚£è®©æˆ‘ä»¬æ¥ä¿®æ”¹ä¸€ä¸‹ï¼Œåšä¸ªæŒ‰é’®æ¥åˆ‡æ¢ç¼–è¾‘å’Œæ¸²æŸ“è¿™ä¸¤ä¸ªçŠ¶æ€ï¼š

```html
  <div id="app-container">
    <textarea id="markdown-input" placeholder="Enter Markdown here..."></textarea>
    <div id="markdown-preview"></div>
    <div class="buttons-container">
      <button id="toggle-pin" class="toggle-button">ğŸ“Œ Toggle Pin</button>
      <button id="toggle-preview" class="toggle-button">ğŸ‘ŒğŸ» Preview</button>
    </div>
  </div>
```

å°†å‰ç«¯é€»è¾‘ä»ç„¶å†™åœ¨renderer.jsä¸­ï¼Œåœ¨å¤„ç†è¿™ä¸ªé€»è¾‘ï¼š

```jsx
togglePreviewBtn.addEventListener('click', () => {
  isPreviewMode = !isPreviewMode; // ç›´æ¥åˆ‡æ¢é¢„è§ˆæ¨¡å¼çŠ¶æ€
  if (isPreviewMode) {
    mdInput.style.display = 'none';
    mdPreview.style.display = 'block';
    togglePreviewBtn.textContent = 'âœï¸  Edit';
  } else {
    mdInput.style.display = 'block';
    mdPreview.style.display = 'none';
    togglePreviewBtn.textContent = 'ğŸ‘ŒğŸ» Preview';
  }
});
```

OKï¼ŒåŠŸèƒ½å®ç°ï¼Œç›¸ä¿¡ç»†å¿ƒçš„è¯»è€…å·²ç»å‘ç°äº†è¿™é‡Œè¿˜å¤šäº†ä¸€ä¸ªâ€œ**ğŸ“Œ Toggle Pinâ€**çš„æŒ‰é’®ï¼Œæ—¢ç„¶è¦è®©ä»–ä½œä¸ºä¾¿åˆ©è´´çš„å­˜åœ¨ï¼Œé‚£è‡ªç„¶è¦ç»™ä»–ç½®é¡¶çš„åŠŸèƒ½å’¯ï¼Œè¿™é‡Œä¾¿å¯ä»¥åˆ©ç”¨Electronçš„ä¸€ä¸ªé‡è¦åŠŸèƒ½â€”â€”[è¿›ç¨‹é—´é€šä¿¡ (IPC)](https://www.electronjs.org/zh/docs/latest/tutorial/ipc)

> è¿›ç¨‹é—´é€šä¿¡ (IPC) æ˜¯åœ¨ Electron ä¸­æ„å»ºåŠŸèƒ½ä¸°å¯Œçš„æ¡Œé¢åº”ç”¨ç¨‹åºçš„å…³é”®éƒ¨åˆ†ä¹‹ä¸€ã€‚ ç”±äºä¸»è¿›ç¨‹å’Œæ¸²æŸ“å™¨è¿›ç¨‹åœ¨ Electron çš„è¿›ç¨‹æ¨¡å‹å…·æœ‰ä¸åŒçš„èŒè´£ï¼Œå› æ­¤ IPC æ˜¯æ‰§è¡Œè®¸å¤šå¸¸è§ä»»åŠ¡çš„å”¯ä¸€æ–¹æ³•ï¼Œä¾‹å¦‚ä» UI è°ƒç”¨åŸç”Ÿ API æˆ–ä»åŸç”Ÿèœå•è§¦å‘ Web å†…å®¹çš„æ›´æ”¹ã€‚
> 

è¿™é‡Œæˆ‘ä»¬ä¸»è¦çš„æ€è·¯æ˜¯ï¼š"Toggle Pin" åŠŸèƒ½é€šè¿‡æ¸²æŸ“è¿›ç¨‹ç›‘å¬æŒ‰é’®ç‚¹å‡»ï¼Œåˆ‡æ¢çª—å£ç½®é¡¶çŠ¶æ€ï¼Œå¹¶é€šè¿‡Electronçš„IPCæœºåˆ¶å‘é€æ¶ˆæ¯ç»™ä¸»è¿›ç¨‹ï¼Œç”±ä¸»è¿›ç¨‹æ‰§è¡Œå®é™…çš„ç½®é¡¶æ“ä½œï¼Œä¸‹é¢æ˜¯å®é™…ä»£ç ï¼š

```jsx
// main.js

const { app, BrowserWindow, ipcMain } = require('electron');

//.....

// ç›‘å¬ä»æ¸²æŸ“è¿›ç¨‹å‘æ¥çš„toggle-pinæ¶ˆæ¯
ipcMain.on('toggle-pin', (event, shouldPin) => {
  if (win) {
    win.setAlwaysOnTop(shouldPin); // è®¾ç½®çª—å£æ˜¯å¦ç½®é¡¶
  }
});

// renderer.js
togglePinBtn.addEventListener('click', () => {
  isWindowPinned = !isWindowPinned;
  ipcRenderer.send('toggle-pin', isWindowPinned);
  togglePinBtn.textContent = isWindowPinned ? 'ğŸ“Œ Toggle Pin' : 'ğŸ“„ Just Paper';
});
```

å†è®©æˆ‘ä»¬æ¥ç¨å¾®çš„ä¼˜åŒ–ä¸€ä¸‹æ ·å¼ï¼Œè¿è¡ŒElectronçœ‹çœ‹æœ€ç»ˆåŠŸèƒ½ï¼š

![Untitled](/static/images/blog/memomark/untitled.gif)

è‡³æ­¤ï¼ŒåŠŸèƒ½å·²ç»å…¨éƒ¨å®Œæˆ

## æ‰“åŒ…æ„å»º

è¿™é‡Œæˆ‘ä»¬ä½¿ç”¨electron-builderæ¥è¿›è¡Œæ‰“åŒ…ï¼Œåœ¨package.jsonä¸­é…ç½®ä¸€ä¸‹æ—¢å¯ï¼š

```json
"build": {
    "appId": "com.yourdomain.memomark",
    "mac": {
      "category": "public.app-category.productivity",
      "icon": "assets/MemoMark.icns" // ä½ çš„logo
    },
    "dmg": {
      "title": "MemoMark",
      "icon": "assets/MemoMark.icns",
      "window": {
        "width": 600,
        "height": 400
      }
    },
```

æ³¨æ„ï¼ŒMacç«¯çš„logoæ ¼å¼ä¸ºicnsï¼Œåˆ«å¼„é”™äº†å“¦~

è¿è¡Œæ‰“åŒ…æ„å»ºå‘½ä»¤ï¼š

```bash
npm run dist
```

![Untitled](/static/images/blog/memomark/untitled-3.png)

æ‰“åŒ…æˆåŠŸï¼å®‰è£…ä¹‹åä¾¿å¯ä»¥åœ¨æœ¬åœ°ä½¿ç”¨è‡ªå·±å¼€å‘çš„Electronåº”ç”¨äº†~

## æ€»ç»“å’Œä¸€äº›å°é—æ†¾

åœ¨é€‰æ‹©ç”¨äºæ„å»ºæ¡Œé¢åº”ç”¨çš„æ¡†æ¶æ—¶ï¼Œä¸ä»…éœ€è¦è€ƒè™‘å…¶åŠŸèƒ½æ€§ï¼Œè¿˜éœ€è¦è€ƒè™‘å…¶æ€§èƒ½ã€è¿è¡Œæ—¶å¤§å°ã€å¼€å‘ç»éªŒç­‰å› ç´ ã€‚ä»¥ä¸‹æ˜¯Electronå’ŒTauriçš„è¯¦ç»†å¯¹æ¯”ï¼š

|  | Electron | Tauri |
| --- | --- | --- |
| ä½“ç§¯ | Electronçš„æœ€å°å¯æ‰§è¡Œæ–‡ä»¶ä½“ç§¯çº¦ä¸º50MBï¼Œè¿™æ˜¯ç”±äºå®ƒä¾èµ–äºå®Œæ•´çš„Chromiumå’ŒNode.jsè¿è¡Œæ—¶ã€‚ | Tauriçš„ä¸€ä¸ªæ˜¾è‘—ä¼˜åŠ¿æ˜¯å…¶å°å·§çš„ä½“ç§¯ã€‚ä¸€ä¸ªåŸºæœ¬çš„Tauriåº”ç”¨çš„ä½“ç§¯åœ¨å‡ ç™¾KBåˆ°1-2MBä¹‹é—´ã€‚ |
| é€Ÿåº¦ | Electronçš„é€Ÿåº¦å—åˆ°å…¶å¤§ä½“ç§¯çš„å½±å“ï¼Œå› ä¸ºéœ€è¦åŠ è½½å®Œæ•´çš„Chromiumå’ŒNode.jsè¿è¡Œæ—¶ã€‚ | Tauriç”±Rustç¼–å†™ï¼Œå› æ­¤è¿è¡Œé€Ÿåº¦å¿«ï¼Œå¯åŠ¨æ—¶é—´çŸ­ã€‚ |
| å®‰å…¨æ€§ | Electronçš„å®‰å…¨æ€§å–å†³äºå¼€å‘è€…å¦‚ä½•ä½¿ç”¨å®ƒã€‚ä¸å½“ä½¿ç”¨å¯èƒ½å¯¼è‡´å®‰å…¨æ¼æ´ï¼Œä¾‹å¦‚åœ¨æ¸²æŸ“å™¨è¿›ç¨‹ä¸­ç›´æ¥ä½¿ç”¨Node.js APIã€‚ | Tauriçš„è®¾è®¡ç†å¿µæ˜¯å®‰å…¨ä¼˜å…ˆï¼Œå®ƒé‡‡ç”¨äº†ä¸€ç§ä¸¥æ ¼çš„å®‰å…¨æ¨¡å‹ï¼ŒåŒ…æ‹¬ç¦æ­¢ç›´æ¥ä»æ¸²æŸ“å™¨è®¿é—®Node.js APIã€‚ |
| ç¤¾åŒº | Electronç”±GitHubå¼€å‘ï¼Œæ‹¥æœ‰å¤§é‡çš„ç”¨æˆ·å’Œæˆç†Ÿçš„ç¤¾åŒºã€‚å®ƒæœ‰å¤§é‡çš„æ–‡æ¡£å’Œæ•™ç¨‹ã€‚ | Tauriæ˜¯ä¸€ä¸ªç›¸å¯¹è¾ƒæ–°çš„é¡¹ç›®ï¼Œå…¶ç¤¾åŒºæ­£åœ¨å¿«é€Ÿå‘å±•ï¼Œä½†ç›®å‰ä»ä¸å¦‚Electronæˆç†Ÿã€‚ |
| å…¼å®¹æ€§ | Electronæ”¯æŒWindowsã€macOSå’ŒLinuxã€‚ | Tauriä¹Ÿæ”¯æŒWindowsã€macOSå’ŒLinuxã€‚ |
| å¼€å‘ç»éªŒ | Electronæ”¯æŒHTMLã€CSSå’ŒJavaScriptï¼Œå› æ­¤å‰ç«¯å¼€å‘è€…å¯ä»¥å¾ˆå¿«ä¸Šæ‰‹ã€‚ | Tauriå…è®¸ä½¿ç”¨ä»»ä½•å¯ä»¥ç¼–è¯‘æˆé™æ€HTMLã€CSSå’ŒJavaScriptçš„å‰ç«¯æ¡†æ¶ï¼Œå› æ­¤å®ƒå¯¹å‰ç«¯å¼€å‘è€…æ¥è¯´æ˜¯éå¸¸çµæ´»çš„ã€‚ |
| å†…å­˜ä½¿ç”¨ | Electronçš„å†…å­˜ä½¿ç”¨è¾ƒé«˜ï¼Œå› ä¸ºæ¯ä¸ªElectronåº”ç”¨éƒ½éœ€è¦è¿è¡Œè‡ªå·±çš„Chromiumå’ŒNode.jså®ä¾‹ã€‚ | Tauriçš„å†…å­˜ä½¿ç”¨ç›¸å¯¹æ›´ä½ï¼Œå› ä¸ºå®ƒä¸ä¾èµ–äºé‡é‡çº§çš„è¿è¡Œæ—¶ç¯å¢ƒã€‚ |

å°±æˆ‘å®ç°çš„è¿™ä¸ªæ”¯æŒmarkdownçš„ä¾¿ç¬ºï¼Œå¤§å°ä¾¿å·²ç»è¾¾åˆ°äº†237mbï¼ˆå½“ç„¶ä¹Ÿå¯èƒ½æ˜¯æˆ‘æ²¡æœ‰è¿›è¡Œä¼˜åŒ–ï¼‰ï¼Œå¦‚æœç”¨Tauriçš„è¯ï¼Œå¤§å°æˆ–è®¸ä¼šæ§åˆ¶çš„æ›´å¥½ï¼Œè¿™ä¹Ÿæ˜¯è¿™ä¸ªé¡¹ç›®æœ€å¤§çš„é—æ†¾äº†

å¦‚æœä½ å¯¹è¿™ä¸ªé¡¹ç›®æ„Ÿå…´è¶£ï¼Œæˆ–è®¸ä½ å¯ä»¥ç‚¹è¿›å»çœ‹çœ‹https://github.com/isolcat/MemoMarkï¼Œå¦‚æœèƒ½å¤Ÿä¸‹è½½ä¸‹æ¥ä½“éªŒä¸€ä¸‹ï¼Œæissuesæˆ–è€…prå°±æ›´å¥½äº†ï¼Œå¸Œæœ›è¿™æ¬¾æ”¯æŒmarkdownçš„Electronä¾¿ç¬ºåº”ç”¨èƒ½å¤Ÿå¸®åŠ©åˆ°ä½ ~
